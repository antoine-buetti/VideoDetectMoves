process {
    // Set a common base container for all processes
    container = 'ubuntu:22.04'
    
    // Seqera Platform optimizations
    executor = 'awsbatch'
    errorStrategy = 'retry'
    maxRetries = 2
    
    withName: 'plot' {
        conda = 'conda-forge::r-base conda-forge::procps-ng'
    }
}

docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
}

conda {
    enabled = true
    channels = ['conda-forge', 'bioconda', 'defaults']
    cacheDir = '/tmp/conda-cache'
}

// Seqera Platform specific settings
aws {
    region = 'eu-west-1'  // Adjust to your region
    batch {
        maxTransferAttempts = 3
        delayBetweenAttempts = '10 sec'
    }
}

// Work directory for Seqera Platform - REPLACE WITH YOUR S3 BUCKET
workDir = 's3://257679641370643-86751445423473-v42lkxx0sxmuehf/work'

// Enable reports
report.enabled = true
timeline.enabled = true
trace.enabled = true
